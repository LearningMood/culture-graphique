@use "sass:math";
@use "sass:map";
// ============================================
// VARIABLES - Breakpoints
// ============================================
$breakpoints: (
  xs: 480px,
  sm: 640px,
  md: 768px,
  lg: 1024px,
  xl: 1280px,
  xxl: 1536px
);

// ============================================
// MIXINS - Media Queries
// ============================================
// Min-width (mobile-first)
@mixin mq-min($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (min-width: map.get($breakpoints, $breakpoint)) {
      @content;
    }
  } @else {
    @warn "Breakpoint `#{$breakpoint}` n'existe pas dans $breakpoints.";
  }
}

// .ma-classe {
//   @include container(maxi);
  
//   @include mq-min(md) {
//     padding: 2rem;
//   }
// }

// Max-width (desktop-first)
@mixin mq-max($breakpoint) {
  @if map.has-key($breakpoints, $breakpoint) {
    @media (max-width: map.get($breakpoints, $breakpoint) - 1px) {
      @content;
    }
  } @else {
    @warn "Breakpoint `#{$breakpoint}` n'existe pas dans $breakpoints.";
  }
}

// Between (entre deux breakpoints)
@mixin mq-between($min-breakpoint, $max-breakpoint) {
  @if map.has-key($breakpoints, $min-breakpoint) and map.has-key($breakpoints, $max-breakpoint) {
    @media (min-width: map.get($breakpoints, $min-breakpoint)) and (max-width: map.get($breakpoints, $max-breakpoint) - 1px) {
      @content;
    }
  } @else {
    @warn "L'un des breakpoints n'existe pas dans $breakpoints.";
  }
}

// ============================================
// MIXINS - Containers
// ============================================

// Mixin de base pour tous les containers
@mixin container-base {
  width: 100%;
  margin-left: auto;
  margin-right: auto;
  padding-left: $container-padding;
  padding-right: $container-padding;
}

// Mixin pour dÃ©finir un container spÃ©cifique
@mixin container($size: default) {
  @include container-base;
  
  @if map.has-key($containers, $size) {
    max-width: map.get($containers, $size);
  } @else {
    @warn "Taille de container `#{$size}` n'existe pas dans $containers.";
  }
}
// ============================================
// MIXINS - Typographie Headings
// ============================================

@mixin heading-base {
  font-family: $font-titre;
  font-weight: map.get($font-weights, bold);
  line-height: map.get($line-heights, tight);
  margin-bottom: 0.5em;
}

@mixin heading($level) {
  @include heading-base;
  
  @if $level == 1 {
    font-size: map.get($font-sizes, 4xl);
    @include mq-min(md) {
      font-size: map.get($font-sizes, 5xl);
    }
  } @else if $level == 2 {
    font-size: map.get($font-sizes, 3xl);
    @include mq-min(md) {
      font-size: map.get($font-sizes, 4xl);
    }
  } @else if $level == 3 {
    font-size: map.get($font-sizes, 2xl);
  }
  
}

//Ajout pour tout rÃ©gler d'un coup (taille, graisse et letter-spacing) 
@mixin text($size, $lh: null, $weight: null, $letter-spacing: null) {
  font-size: font-size($size);
  @if $lh != null { line-height: line-height($lh); }
  @if $weight != null { font-weight: font-weight($weight); }
  @if $letter-spacing != null { letter-spacing: letter-spacing($letter-spacing); }
}
// ============================================
// MIXINS - Espacements 
// ============================================
// Explication pas Ã  pas :
// $space: 4 â†’ valeur par dÃ©faut si vous ne passez rien
// > * + * â†’ sÃ©lecteur CSS appelÃ© "lobotomized owl" ðŸ¦‰

// > = enfants directs seulement
// * = n'importe quel Ã©lÃ©ment
// + = adjacent (qui suit immÃ©diatement)
// * = un autre Ã©lÃ©ment

// Ce que Ã§a fait :
// Ajoute un margin-top Ã  tous les Ã©lÃ©ments sauf le premier
// CrÃ©e un espacement vertical uniforme
// Mixins "empiler" pour diffÃ©rents contextes
@mixin stack($space: 4) {
  > * + * {
    margin-top: space($space);
  }
}


// FEX_GAP (inline)
// Met l'Ã©lÃ©ment en flexbox (disposition horizontale)
// Utilise gap pour espacer les enfants
// gap = espacement moderne qui fonctionne entre les Ã©lÃ©ments flex/grid
// Avantage du gap par rapport au margin

@mixin flex-gap($space: 4) {
  display: flex;
  gap: space($space);
}

// SECTION-SPACING
// padding-block = raccourci pour padding-top + padding-bottom
// Mobile : space(12) = 3rem = 48px
// Tablette (md) : space(16) = 4rem = 64px
// Desktop (lg) : space(24) = 6rem = 96px
@mixin section-spacing {
  padding-block: space(12);
  
  @include mq-min(md) {
    padding-block: space(16);
  }
  
  @include mq-min(lg) {
    padding-block: space(24);
  }
}

// ============================================
// MIXINS - Grid - centrage des colonnes sur la grille Ã  N col 
// ============================================
@mixin heading-cols($span, $cols: 24) { // le tout sur 24
  // start = ((cols - span) / 2) + 1 ; end = start + span
  $start: math.div(($cols - $span), 2) + 1;
  $end: $start + $span;

  // sÃ©curitÃ©: si pas entier, on arrondit et signale
  @if $start != math.round($start) {
    @warn "heading-cols(): span=#{$span} ne centre pas parfaitement sur #{$cols} colonnes. Ajustement arrondi.";
    $start: math.round($start);
    $end: $start + $span;
  }

  grid-column: #{$start} / #{$end};
}


// ============================================
// MIXINS - Filet sous les titres 
// ============================================
@mixin heading-style(
  $size,                 // ex: 4xl
  $lh: tight,            // ta map de line-heights
  $weight: normal,
  $color: $indigo,
  $mt: space(12),
  $mb: space(4),
  $underline: true,
  $filet-color: $indigo-light,
  $filet-height: 3px,
  $filet-width: 100%,       // 100% = plein ; ex: 100px = fixe
  $filet-centered: false    // true => centrer le filet
) {
  @include text($size, $lh, $weight);
  color: $color;
  margin-top: $mt;
  margin-bottom: $mb;

  @if $underline == true {
    &::after{
      content:"";
      display:block;
      background-color: $filet-color;
      height: $filet-height;
      width: $filet-width;
      margin-top: space(5);
      @if $filet-centered { margin-left:auto; margin-right:auto; }
    }
  }
}