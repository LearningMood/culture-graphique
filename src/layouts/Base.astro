---
import '../styles/index.scss';// <-- import SCSS unique | Astro génére les <link> optimisés automatiquement
import HeaderGlobal from '../components/HeaderGlobal.astro';

export interface Props {
  title: string;
  homeUrl?: string;
}

const { title, homeUrl = '/' } = Astro.props;

// Détection automatique si pas spécifié
const currentPath = Astro.url.pathname;
const autoHomeUrl = currentPath.match(/^\/formations\/([^\/]+)/)
  ? `/formations/${currentPath.match(/^\/formations\/([^\/]+)/)[1]}/`
  : '/';

const finalHomeUrl = homeUrl ?? autoHomeUrl;
---
<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <title>{title}</title>
    <link rel="icon" type="image/x-icon" href="/favicon-tatziki.svg">
    <slot name="head" /> <!-- pour ajouter des metas/links spécifiques -->
  </head>
  <body>
    <HeaderGlobal logoSrc="/favicon-tatziki.svg" homeUrl={homeUrl} />
    <slot /> <!-- le contenu des pages -->
  </body>
</html>

